'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var vueDemi = require('vue-demi');
var shared = require('@vueuse/shared');

/**
 * Reactive Firebase Realtime Database binding.
 *
 * @param docRef
 * @param options
 */
function useRTDB(docRef, options = {}) {
    const { autoDispose = true, } = options;
    const data = vueDemi.ref(undefined);
    function update(snapshot) {
        data.value = snapshot.val();
    }
    docRef.on('value', update);
    if (autoDispose) {
        shared.tryOnUnmounted(() => {
            docRef.off('value', update);
        });
    }
    return data;
}

exports.useRTDB = useRTDB;
