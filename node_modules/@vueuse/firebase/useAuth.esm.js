import { ref, computed } from 'vue-demi';

function useAuth(authInstance) {
    let auth;
    if (authInstance instanceof Function)
        auth = authInstance();
    else
        auth = authInstance;
    const user = ref(auth.currentUser);
    const isAuthenticated = computed(() => !!user.value);
    auth.onIdTokenChanged(authUser => user.value = authUser);
    return {
        isAuthenticated,
        user,
    };
}

export { useAuth };
